# oscw


TODO:
1) доделать на кое как файловую 
2) в логи дубликаты ключей вывести 


Да, вы правильно понимаете. Давайте разберёмся подробнее.

### Когда передавать данные в запросах

1. **POST**:
    - Этот метод используется для создания нового ресурса или выполнения действия, которое изменяет данные на сервере.
    - **Обычно** в `POST`-запросах отправляются данные, например, в формате JSON, чтобы указать, какие данные нужно создать или изменить.
    - **Пример**: При создании нового пула (`ADD_POOL`) в теле запроса передаётся JSON, который содержит название пула:
      ```json
      {
        "pool": "data_pool"
      }
      ```

2. **PUT**:
    - Метод `PUT` используется для обновления существующего ресурса.
    - Как и в случае с `POST`, вам нужно передавать данные (обычно JSON) в теле запроса, которые указывают, какие данные нужно обновить.
    - **Пример**: Обновление данных в коллекции:
      ```json
      {
        "data": ["new_value1", "new_value2"]
      }
      ```

3. **DELETE**:
    - Метод `DELETE` используется для удаления существующего ресурса. В большинстве случаев вам **не нужно** передавать тело запроса.
    - Вместо этого вся информация, необходимая для удаления, передаётся в URL.
    - **Пример**: При удалении пула достаточно передать его название в URL:
      ```http
      DELETE /pools/data_pool
      ```

4. **GET**:
    - Метод `GET` используется для получения данных с сервера. В `GET`-запросах **никогда** не передаётся тело запроса.
    - Вся необходимая информация для получения ресурса передаётся в URL.
    - **Пример**: Получение данных из коллекции:
      ```http
      GET /pools/data_pool/schemes/scheme_name/collections/collection_name/data/data_id
      ```

### Примеры использования строк в `DELETE` и `GET`:

#### 1. **DELETE**:

```cpp
CROW_ROUTE(app, "/pools/<string>").methods("DELETE"_method)([this](const std::string& pool) {
    return handle_rm_pool(pool);
});
```

- В этом примере название пула (`pool`) передаётся в URL как часть маршрута. Внутри обработчика `handle_rm_pool` вы используете это значение для удаления пула.
- Так как операция удаления не требует дополнительной информации, вам не нужно передавать тело запроса.

#### 2. **GET**:

```cpp
CROW_ROUTE(app, "/pools/<string>/schemes/<string>/collections/<string>/data/<string>").methods("GET"_method)([this](const std::string& pool, const std::string& scheme, const std::string& collection, const std::string& data_id) {
    // Логика поиска данных
    return handle_find_data(pool, scheme, collection, data_id);
});
```

- В этом примере все необходимые параметры (`pool`, `scheme`, `collection`, `data_id`) передаются в URL. Они используются для поиска и возврата данных.
- Нет необходимости передавать тело запроса, так как все нужные данные уже переданы в виде параметров маршрута.

### Когда использовать JSON в запросах:

- Используйте JSON в теле запроса для `POST` и `PUT`, когда вам нужно передать дополнительные данные на сервер (например, для создания или обновления ресурса).
- Для `DELETE` и `GET`, обычно достаточно передать параметры в URL, и тело запроса не используется.

### Итог:

- **POST**: Для создания нового ресурса, данные передаются в JSON в теле запроса.
- **PUT**: Для обновления существующего ресурса, данные также передаются в JSON в теле запроса.
- **DELETE** и **GET**: Передача данных обычно не требуется. Вся информация передаётся через параметры URL.